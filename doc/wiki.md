### 重要！地图与灯的数据规范

在本游戏中我们采用一个数组来储存单元格，另一个数组用于储存灯的位置信息以及点亮与否。我们的位置Position中有三个整形x,y,z。它们在游戏界面中的位置、方向等大致如下图所示：

![](./Component-1.png)

在读取并生成地图的过程中，我们会用到动态内存分配new，然后将新生成的指针分别赋值给地图类中的成员变量。同时我们应该记录地图中所有的灯以及格子的数量，在运行过程中需要经常遍历这些数据。

我们规范中位置Position中的三个变量都是可正可负的，其中0值为游戏界面的中心点。在地图读取以及生成过程中，应当保证位置靠后的单元格放在数组前面。这样做是为了保证绘制过程中的正确遮罩。总之就是三个位置变量越小的越靠前生成。

至此游戏中的绘制模块已经全部完成，只剩一些debug的工作了。

* 程序架构改动须知

本次更新中对 struct.h 数据结构做了较多修改，其中较为重要的有一点，将Map类中的Cell单元格二重指针改为了一重，以此适应绘图工作中的需要。此数据结构已在绘图模块中使用，不宜再进一步修改，还希望在其他模块的实现过程中多加注意。

由于绘图模块中的绘制顺序及透视规则限制，构造Map类中的单元格是需要严格按照从小到大的顺序进行，如此才能保证绘制模块正常工作。这意味着其中的单元格必须优先按照x位置从小到大，再按照y位置从小到大排序。

* 关于命名空间：

尽量不要在这个程序中使用 "using namespace std;" 这样的语句。

因为我们会在程序中使用到很多不同的命名空间，尤其是在引入第三方库之后。前期使用这样的语句会给后续扩充内容带来冲突，而且debug相当困难。当需要调用标准库中的对象/函数等时可以在其前使用作用域限定符（就是两个冒号）。例如 "cout << " 应该改为 "std::cout << "。我们现在也同时使用命名空间 "cst"，这个用来保存项目中所用到的各类常数。在后续引入ImGui制作图形界面时还会有命名空间 "imgui"。

在调用这些东西的时候稍微多敲点字，多一点冗余的代码在以后扩展起来会更方便。

黄砚星{

* 目前整个项目中所需的数据结构已基本建设完成，详细使用中的注意事项可参考struct.h文件中的注释。
* 当前数据结构的构建中使用OOP（面向对象）的方式进行，如有不明白的地方可以随时咨询、查询网络资料或者参阅C++ Primer Plus这本教材，电子书链接已放置到文档info.md中。
* 目前主要的工作是在三个具体的模块中实现struct.h中所定义的函数，我在此后也会根据需求对数据结构进行调整和扩充。
* 这些函数原型都放在struct.h文件中，而它们的实现则放在各*.cpp文件中。如需增删参数/修改返回值等等操作需要同时修改两边的函数定义。

}

于展{

	变量，常量主要采用struct.h和const.h的数据；

1. 2D画图目前规划

	采用正方形的格式，类似于二维数组（矩阵）的格式，利用动态分配，进行对关卡文档的数据输入：

	数组数字代表此地层数，0代表此地不存在，注意进行边界确定，防止机器人出界；

	数据类型，首先有没有灯，结构（struct.h）中三个MAP元素，主要利用指针形式和动态分配；

    
2. 地图数据关卡制作

	目前准备做三个测试数据用于debug，规模都不是很大（不会超过10*10，灯的数量不会超过10，步数依据情况而定）；

	数据关卡会写在一个test.doc的一个文件里，目前只是提供测试而用，第一个测试数据为大作业文档里所给出的例子；

	后续地图数据会逐渐完善；

3.交互模块—实现命令行读取输入指令并执行

	按照大作业文档要求的功能，采取输入字符串，来判断调用哪一个交互模块；

	大作业文档中的MAIN即为调用不同函数的种类，P1，P2，P3目前分类P1为TL,TR,P2为MOVE，JUMP，P3为LIT;

	朝向等同于大作业文档，x轴，y轴逻辑是右手直角坐标系，竖直向上是z轴，数字（2D）的x轴，y轴等同于平时数学中常见的平面直角坐标系，数组第一个为行，第二个为列，但所有坐标数据都是x,y即为先列后行)；

	情况类似于结构那一节的作业题；

4.实现尽可能多的指令

	目前先完成基本内容，后续有时间的话我会拓展功能，并将功能写在文档中；

5.执行模块—实现读取指令序列文件并执行

	读取指令序列文件格式，进行一些对于机器人移动的操作；

	对于不正常的情况，例如：此地没有灯，或者是已经点过灯的情况下，会进行提示不正常操作，进行输出，但是仍然同时减少一次操作次数；

	目前这种指令包括：上述两个例子，撞墙，超出边界，跳跃不符合规则；
}
